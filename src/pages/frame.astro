---
import Layout from "../layouts/Layout.astro";
---

<Layout>
  <script>
    import "@mux/mux-player";
  </script>
  <script
    is:inline
    src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"
  ></script>
  <script is:inline>
    const muxPlayer = document.createElement("mux-player");
    const urlParams = new URLSearchParams(window.location.search);
    const playbackId = urlParams.get("playback-id");
    const sanitizedPlaybackId = DOMPurify.sanitize(playbackId);
    muxPlayer.setAttribute("playback-id", sanitizedPlaybackId);
    document.body.appendChild(muxPlayer);
  </script>
</Layout>

<style is:global>
  html,
  body {
    height: 100%;
    background-color: #000;
  }
  body {
    margin: 0px;
    overflow: hidden;
  }
  mux-player {
    height: 100%;
    width: 100%;
    display: block;
  }
</style>
